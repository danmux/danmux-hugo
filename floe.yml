id: floe
host-tags: [linux]   # all these tags must match the tags on any host for it to be able to run there
env:
  - PATH=./hugo:$PATH
ver: 2

tasks:
  # - name: Checkout
  #   listen: trigger.good
  #   type: git-checkout

  - name: Download Hugo
    # listen: task.checkout.good
    listen: trigger.good
    type: fetch
    opts:
      sub-dir: hugo
      url: "https://s3-eu-west-1.amazonaws.com/floe-assets/hugo_0.45.1_Linux-64bit.tar.gz"
      checksum: "e10e4162d4d568b92e3c8b49efeb1fc3fd6310138dc5d7a63b86b852d37af158"
      checksum-algo: "sha256"
      location: hugo/  # the trailing slash means in the hugo folder

  - name: Expand Hugo
    listen: task.download-hugo.good
    type: exec
    opts:
      sub-dir: hugo
      cmd: "tar -xf hugo_0.45.1_Linux-64bit.tar.gz"

  - name: Hugo Version
    listen: task.expand-hugo.good
    type: exec
    opts:
      shell: "hugo version"

  - name: done
    listen: task.hugo-version.good
    type: end
